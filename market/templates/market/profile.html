{% extends "market/base.html" %}
{% block title %}My Profile - BBDOLX{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto space-y-5">

  <!-- Top card: user info -->
  <div class="bg-white rounded-2xl shadow p-5 card-animate">
    <h1 class="text-xl font-semibold mb-2">Your BBDOLX Profile</h1>

    <p class="text-sm text-slate-700">
      <span class="font-semibold">Username:</span>
      {{ request.user.username }}
    </p>

    <p class="text-sm text-slate-700">
      <span class="font-semibold">Email:</span>
      {{ request.user.email }}
    </p>

    <p class="text-xs text-slate-500 mt-2">
      This information is linked to your college account.  
      You can control what buyers see using the options below.
    </p>
  </div>

  <!-- Profile form card -->
  <div class="bg-white rounded-2xl shadow p-5 card-animate">
    <h2 class="text-lg font-semibold mb-3">Contact & details</h2>

    <form method="post" class="space-y-4">
      {% csrf_token %}

      {% for field in form %}
        <div class="text-sm">
          <label class="block mb-1 font-medium">
            {{ field.label }}
          </label>

          {% if field.name == "hide_name" %}
            <!-- checkbox styled separately -->
            <label class="inline-flex items-center gap-2 text-xs text-slate-600">
              {{ field }}
              <span>Hide my name from buyers (show only “Seller”)</span>
            </label>
          {% else %}
            {{ field }}
          {% endif %}

          {% if field.errors %}
            {% for error in field.errors %}
              <p class="text-[11px] text-red-500 mt-1">{{ error }}</p>
            {% endfor %}
          {% endif %}
        </div>
      {% endfor %}

      <button
        class="w-full mt-2 bg-teal-500 text-white py-2 rounded-full text-sm font-semibold hover:bg-teal-600 transition">
        Save changes
      </button>
    </form>
  </div>
</div>

<script>
  // style all non-checkbox inputs
  document.querySelectorAll('input:not([type="checkbox"])').forEach(el => {
    el.classList.add(
      'w-full','border','border-slate-300','rounded-lg','px-3','py-2','text-sm',
      'focus:outline-none','focus:ring-2','focus:ring-teal-500'
    );
  });
</script>
{% endblock %}
