{% extends "market/base.html" %}
{% block title %}Verify Email - BBDOLX{% endblock %}

{% block content %}
<div class="min-h-[60vh] flex justify-center items-center">
  <div class="bg-white p-6 rounded-2xl shadow-lg max-w-sm w-full card-animate">
    <h2 class="text-xl font-semibold mb-1">Verify your email</h2>
    <p class="text-xs text-slate-500 mb-4">
      Enter the 6-digit OTP sent to your email. It expires in
      <span id="otp-timer" class="font-semibold text-teal-600">2:00</span>.
    </p>

    <form method="post" class="space-y-4">
      {% csrf_token %}
      <input name="otp" maxlength="6"
             class="w-full border border-slate-300 rounded-lg px-3 py-2 text-sm text-center tracking-[0.3em]
                    focus:outline-none focus:ring-2 focus:ring-teal-500"
             placeholder="• • • • • •">

      <button
        class="w-full bg-teal-500 hover:bg-teal-600 text-white py-2 rounded-full text-sm font-semibold transition">
        Verify OTP
      </button>
    </form>

    <form method="post" action="{% url 'resend_otp' %}" class="mt-4 text-center">
      {% csrf_token %}
      <button type="submit"
              class="text-xs text-teal-600 hover:text-teal-700 font-semibold underline underline-offset-4">
        Resend OTP
      </button>
    </form>
  </div>
</div>

<script>
  // Simple 2-minute countdown (optional but nice)
  (function () {
    let total = 120; // seconds
    const el = document.getElementById('otp-timer');
    if (!el) return;

    const interval = setInterval(() => {
      total -= 1;
      if (total <= 0) {
        clearInterval(interval);
        el.textContent = "0:00";
        el.classList.remove("text-teal-600");
        el.classList.add("text-red-500");
        return;
      }
      const m = Math.floor(total / 60);
      const s = total % 60;
      el.textContent = `${m}:${s.toString().padStart(2, "0")}`;
    }, 1000);
  })();
</script>
{% endblock %}
